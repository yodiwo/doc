<!DOCTYPE html>
<html>
  <head>
    <title>Yodiwo SDK &amp; API Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.34" />
<title>Using RESTful HTTP requests :: Yodiwo SDK &amp; API Documentation</title>
<link rel="shortcut icon" href="/doc/images/favicon.png" type="image/x-icon" />
<link href="/doc/css/font-awesome.min.css" rel="stylesheet">
<link href="/doc/css/nucleus.css" rel="stylesheet">
<link href="/doc/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/doc/css/bootstrap.min.css">
<script src="/doc/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/docs.yodiwo.com\/doc\/";
</script>

<style>
div.code-tabs {
  position: relative;
  margin-top: -1px;
  z-index: 10;
  margin-bottom: -20px;
}

div.tab {
  font-size: 13px;
  display: inline-block;
  font-weight: 300;
}

.tab.on a {
  color: #009999;
}

.tab.off a {
  color: grey;
}
</style>
<script>
    function showCode(codeContainer, language) {
        var container = document.getElementById(codeContainer);
        var codes = container.getElementsByTagName('pre');
        for (var i = 0; i < codes.length; i++) {
            codes[i].style.display = 'none';
            if (codes[i].id == language) {
                codes[i].style.display = '';
            }
        }

        var tabs = container.getElementsByClassName('tab');
        for (var i = 0; i < tabs.length; i++) {
            tabs[i].className = "tab off";
            if (tabs[i].getAttribute("data-lang") == language) {
                tabs[i].className = 'tab on';
            }
        }
    }
</script>


<style>
.main {
min-height: calc(100vh - 40px);
}
</style>


<style>

.my-float{
        position:fixed;
        width:50px;
        height:45px;
        bottom:20px;
        right:40px;
        background-color: #012a3c;
        color:#FFF;
        border-radius: 60px;
        text-align: center;
        box-shadow: 2px 2px 3px #999;
        font-weight: bold;
        opacity: 0.45;
        font-size: 30px;
        margin-top:30px;
}


.my-float:hover {
        background-color: #012a3c;
        opacity: 0.8;
        color: white;
}

</style>


<style>
h4 {
padding-top: 71px;
}
</style>

    
  </head>
  <body data-url="/doc/integrators/direct-connection/using-restful-http-requests/">
    
      <header>
  <div class="logo">
    
	
  
    <p><a id="logo" href="/">
<img src="/assets/images/logo.png" alt="Yodiwo">
</a></p>

  

  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
    <nav class="shortcuts">
            <li class="" role="">
                <a href="https://www.yodiwo.com" target="_blank" rel="noopener">
                  <i class='fa fa-globe'></i> <label>Yodiwo</label>
                </a>
            </li>
            <li class="" role="">
                <a href="https://tcyan.yodiwo.com" target="_blank" rel="noopener">
                  <i class='fa fa-cloud'></i> <label>Cyan</label>
                </a>
            </li>
            <li class="" role="">
                <a href="https://github.com/yodiwo" target="_blank" rel="noopener">
                  <i class='fa fa-github'></i> <label>Github repo</label>
                </a>
            </li>
            <li class="" role="">
                <a href="https://discuss.yodiwo.com" target="_blank" rel="noopener">
                  <i class='fa fa-comments'></i> <label>Community</label>
                </a>
            </li>
    </nav>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/doc/" class="dd-item">
          <a href="/doc/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/doc/platform/" class="dd-item haschildren
        ">
      <div>
      <a href="/doc/platform/">Platform</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/doc/platform/interconnection-concepts-and-topology/" class="dd-item">
        <div>
          <a href="/doc/platform/interconnection-concepts-and-topology/">
            Interconnection Concepts and Topology
          </a>
        </div></li>
      <li data-nav-id="/doc/platform/apis/" class="dd-item">
        <div>
          <a href="/doc/platform/apis/">
            APIs
          </a>
        </div></li>
      <li data-nav-id="/doc/platform/yodiwo-fog-gateway/" class="dd-item">
        <div>
          <a href="/doc/platform/yodiwo-fog-gateway/">
            Yodiwo Fog Gateway
          </a>
        </div></li>
        </ul>
    </li>
    <li data-nav-id="/doc/wisper/" class="dd-item haschildren
        ">
      <div>
      <a href="/doc/wisper/">Wisper</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/doc/wisper/yodiwo-wisper/" class="dd-item">
        <div>
          <a href="/doc/wisper/yodiwo-wisper/">
            Yodiwo Wisper
          </a>
        </div></li>
    <li data-nav-id="/doc/wisper/wisper-families/" class="dd-item haschildren
        ">
      <div>
      <a href="/doc/wisper/wisper-families/">Wisper Families</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/doc/wisper/wisper-families/wisper-pro/" class="dd-item">
        <div>
          <a href="/doc/wisper/wisper-families/wisper-pro/">
            Wisper Pro
          </a>
        </div></li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/doc/apis/" class="dd-item haschildren
        ">
      <div>
      <a href="/doc/apis/">Yodiwo APIs</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/doc/apis/plegma/" class="dd-item haschildren
        ">
      <div>
      <a href="/doc/apis/plegma/">Plegma</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/doc/apis/plegma/getting-started/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/getting-started/">
            Getting Started
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/pairing-overview/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/pairing-overview/">
            Pairing Overview
          </a>
        </div></li>
    <li data-nav-id="/doc/apis/plegma/messages/" class="dd-item haschildren
        ">
      <div>
      <a href="/doc/apis/plegma/messages/">API Messages</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/doc/apis/plegma/messages/api-overview/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/messages/api-overview/">
            API Overview
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/messages/base-api-message-class/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/messages/base-api-message-class/">
            Base API message class
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/messages/things-ports/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/messages/things-ports/">
            Things &amp; Ports
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/messages/things-mgmt-ctrl/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/messages/things-mgmt-ctrl/">
            Things management &amp; control
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/messages/message-event-passing/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/messages/message-event-passing/">
            Message &amp; event passing
          </a>
        </div></li>
        </ul>
    </li>
    <li data-nav-id="/doc/apis/plegma/rest/" class="dd-item haschildren
        ">
      <div>
      <a href="/doc/apis/plegma/rest/">Rest API</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/doc/apis/plegma/rest/rest-api/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/rest/rest-api/">
            Get available routes
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/rest/rest-api-things-get/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/rest/rest-api-things-get/">
            Get Things
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/rest/rest-api-things-set/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/rest/rest-api-things-set/">
            Set Things
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/rest/rest-api-events/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/rest/rest-api-events/">
            Post events
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/rest/rest-api-port-states-request/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/rest/rest-api-port-states-request/">
            Sync with server&#39;s Port States
          </a>
        </div></li>
        </ul>
    </li>
    <li data-nav-id="/doc/apis/plegma/mqtt/" class="dd-item haschildren
        ">
      <div>
      <a href="/doc/apis/plegma/mqtt/">MQTT</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/doc/apis/plegma/mqtt/mqtt-overview/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/mqtt/mqtt-overview/">
            MQTT support
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/mqtt/message-format/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/mqtt/message-format/">
            Message format
          </a>
        </div></li>
        </ul>
    </li>
      <li data-nav-id="/doc/apis/plegma/websockets-overview/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/websockets-overview/">
            Web Sockets Overview
          </a>
        </div></li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/doc/integrators/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/doc/integrators/">Integrators</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/doc/integrators/direct-connection/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/doc/integrators/direct-connection/">Direct Connection to Alcyone</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/doc/integrators/direct-connection/using-restful-http-requests/" class="dd-item active">
        <div>
          <a href="/doc/integrators/direct-connection/using-restful-http-requests/">
            Using RESTful HTTP requests
          </a>
        </div> 
<ul>

<li class="dd-item"> 






<a href="#api-keys-for-rest">API keys for REST</a>
</li>

<li class="dd-item"> 






<a href="#basic-http-requests-towards-alcyone">Basic HTTP requests towards Alcyone</a>
</li>

<li class="dd-item"> 






<a href="#http-requests-via-graph-logic">HTTP Requests via graph logic</a>
</li>

<li class="dd-item"> 






<a href="#http-requests-from-alcyone">HTTP Requests from Alcyone</a>
</li>

</ul>

 </li>
      <li data-nav-id="/doc/integrators/direct-connection/using-3rd-party-mqtt-brokers/" class="dd-item">
        <div>
          <a href="/doc/integrators/direct-connection/using-3rd-party-mqtt-brokers/">
            Using 3rd party MQTT brokers
          </a>
        </div></li>
        </ul>
    </li>
    <li data-nav-id="/doc/integrators/connection-via-plegma-api/" class="dd-item haschildren
        ">
      <div>
      <a href="/doc/integrators/connection-via-plegma-api/">Via the Plegma API</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/doc/integrators/connection-via-plegma-api/plegma-nodes-credentials/" class="dd-item">
        <div>
          <a href="/doc/integrators/connection-via-plegma-api/plegma-nodes-credentials/">
            Plegma Nodes Credentials
          </a>
        </div></li>
      <li data-nav-id="/doc/integrators/connection-via-plegma-api/plegma-things-creation-and-handling/" class="dd-item">
        <div>
          <a href="/doc/integrators/connection-via-plegma-api/plegma-things-creation-and-handling/">
            Plegma Things Creation and Handling
          </a>
        </div></li>
        </ul>
    </li>
        </ul>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/doc/platform/" >
   Platform</option>
    <option value="/doc/wisper/" >
   Wisper</option>
    <option value="/doc/apis/" >
   Yodiwo APIs</option>
    <option value="/doc/integrators/" >
   Integrators</option> 
    <option value="/doc/integrators/direct-connection/" >
  - 
   Direct Connection to Alcyone</option> 
      <option value="/doc/integrators/direct-connection/using-restful-http-requests/"  selected>-- Using RESTful HTTP requests</option>
      <option value="/doc/integrators/direct-connection/using-3rd-party-mqtt-brokers/" >-- Using 3rd party MQTT brokers</option>
  
    <option value="/doc/integrators/connection-via-plegma-api/" >
  - 
   Via the Plegma API</option>
  



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/doc/js/lunr.min.js"></script>
        <script type="text/javascript" src="/doc/js/auto-complete.js"></script>
        <link href="/doc/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/docs.yodiwo.com\/doc\/";
          
        </script>
        <script type="text/javascript" src="/doc/js/search.js"></script>
      </div>
    

    <h1>Using RESTful HTTP requests</h1>
    
    
    
    

<p>Any entity can send HTTPS requests towards cyan and if a proper graph exists, the requests will trigger it and have it executed.</p>

<h4 id="api-keys-for-rest">API keys for REST</h4>

<p>Authentication happens via the use of API keys, created by the user in Cyan’s User Profile Manager:</p>

<p><img src="https://docs.yodiwo.com/doc/
assets/images/Prof_manager.png" alt="Alt Authentication via API keys" /></p>

<p>Each created API key is globally unique, tied to the account of user that created it, and can be individually enabled and disabled or have its quota tracked and/or enforced.</p>

<h4 id="basic-http-requests-towards-alcyone">Basic HTTP requests towards Alcyone</h4>

<p>HTTPS requests towards Alcyone must follow the following URL convention:</p>

<p><del>[<strong><a href="https://cyan.yodiwo.com/hooks/restin//">https://cyan.yodiwo.com/hooks/restin//</a></strong>]</del></p>

<p>Use of a valid API key is mandatory, otherwise there will be an immediate 403 – Forbidden response.</p>

<p>The subpath definition is optional and can be used to easily disambiguate between requests (explained later in this section).</p>

<p>Data can be sent either as URL parameters or within the HTTP Request’s body, in JSON or x-www-form-url encoded key-value pairs.</p>

<p>Currently allowed methods are GET and POST.</p>

<p>All requests with valid API keys will reach Alcyone and trigger graphs through the following block:</p>

<p><img src="https://docs.yodiwo.com/doc/
assets/images/ConfBlock1.1.2.png" alt="Alt Configuration Block" /></p>

<p>When creating a graph with the REST IN block the user must set the block’s configuration to match the intended and expected HTTPS request from the device.</p>

<p>The expected method must be chosen.</p>

<p>A subpath may beset as well although it’s not mandatory. If set, it acts as a filter and only HTTP requests that have a <subpath> suffix matching it will trigger the block. If not set, all valid requests will trigger the block and their subpath suffix will be output on the “URL SUBPATH” output. This can then be driven to:</p>

<ul>
<li>value mapping block (static dictionary):</li>
</ul>

<p><img src="https://docs.yodiwo.com/doc/
assets/images/ValueMappingblock1.1.2.png" alt="Alt Value Mapping Block" /></p>

<ul>
<li>key-value store block (run-time dictionary):</li>
</ul>

<p><img src="https://docs.yodiwo.com/doc/
assets/images/KeyValueStore1.1.2.png" alt="Alt Value Mapping Block" /></p>

<ul>
<li>a database query to extract a further runtime
decision on how to handle the request:</li>
</ul>

<p><img src="https://docs.yodiwo.com/doc/
assets/images/Databasequery1.1.2.png" alt="Alt Value Mapping Block" /></p>

<p>The rest of the configuration parameters are optional and will be presented shortly.</p>

<p>Upon sending a valid HTTPS request from a device, the graph will be triggered by the REST IN block(s) whose parameters match the request.</p>

<p>The URL subpath will be then provided as the value of the first port, while either of the other two ports will provide the request’s data, depending on how they were sent(key-value form encoded pairs or raw JSON).</p>

<p>So a final graph of the simplest case of “take values from a sensor and store them to a DB” could be:</p>

<p><img src="https://docs.yodiwo.com/doc/
assets/images/FinalGraph1.1.2.png" alt="Alt Value Mapping Block" /></p>

<p>When a sensor device has data to send, it can use an API key and send the appropriate HTTPS POST request to Yodiwo. It will trigger the graph, its JSON data will get deserialized, an SQL query constructed out of the values and then fed to the ‘Query’ port of the MYSQL block.</p>

<h4 id="http-requests-via-graph-logic">HTTP Requests via graph logic</h4>

<p>Let’s extend this so that the returned HTTP Response provides info about whether the SQL insert operation succeeded or not:</p>

<p><img src="https://docs.yodiwo.com/doc/
assets/images/Graph1.1.3.png" alt="" /></p>

<p>The operation remains the same until the DB query result is fed into a VALUE MAPPING block (it could be a triggered constant instead), for example converting status True to 200 and anything else to 406. From there the integer status code can be fed to and trigger the REST IN RESPONSE block for the final HTTP response to the original request.</p>

<p>The only thing that needs to change is to configure the REST IN block to not automatically reply with 200 OK to incoming requests but instead produce responses through the graph.</p>

<p>For this we set the ‘Send custom response’ switch to ON and set a unique Group ID (any integer number) that will be matched to the configuration of the REST IN RESPONSE block:</p>

<p><img src="https://docs.yodiwo.com/doc/
assets/images/ResponseBlock1.1.3.png" alt="" /></p>

<p><img src="https://docs.yodiwo.com/doc/
assets/images/ResponseBlock21.1.3.png" alt="" /></p>

<h4 id="http-requests-from-alcyone">HTTP Requests from Alcyone</h4>

<p>So far we’ve been receiving sensor-type events into Alcyone. We can also use the HTTP OUT block for a <em>return path</em>, to send out events towards external entities.</p>

<p>This can be used to:</p>

<ul>
<li>extend Alcyone by sending requests to other system components,</li>
<li>connect to 3rd party services,</li>
<li>or just send normal events to edge devices that have implemented an HTTP(s) server</li>
</ul>

<p><img src="https://docs.yodiwo.com/doc/
assets/images/block1.1.4.png" alt="" /></p>

<p>The block receives the body of the message as input; the rest of the parameters are configured via the inspector area where the user specifies:</p>

<ul>
<li><ul>
<li>URL; http:// or https:// can be used for non-secure or secure connections</li>
</ul>

<ul>
<li>HTTP method; GET, POST, PUT currently supported</li>
<li>Headers to add</li>
<li>Data format; currently supported: JSON, form data, SOAP, XML, raw text</li>
</ul></li>
</ul>


    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/doc/integrators/direct-connection/" title="Direct Connection to Alcyone"> <i class="fa fa-chevron-left"></i><label>Direct Connection to Alcyone</label></a>
    <a class="nav nav-next" href="/doc/integrators/direct-connection/using-3rd-party-mqtt-brokers/" title="Using 3rd party MQTT brokers" style="margin-right: 0px;"><label>Using 3rd party MQTT brokers</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

  
    <div class="date">
        <i class='fa fa-calendar'></i> Last update on 15/02/2018
    </div>
    

    <div class="github-link">
      <a href="https://github.com/yodiwo/doc/edit/master/content/integrators/direct-connection/using_restfull_http_requests.md" target="blank"><i class="fa fa-code-fork"></i>
        Improve this page</a>
    </div>
  </div>


	<div>


  
    <p><center> Contact us at : info@yodiwo.com </center></p>

  



	</div>
</footer>

<script src="/doc/js/clipboard.min.js"></script>

<link href="/doc/css/featherlight.min.css" rel="stylesheet">
<script src="/doc/js/featherlight.min.js"></script>



<script src="/doc/theme-flex/script.js"></script>

    

    
    

    
  </body>
</html>