<!DOCTYPE html>
<html>
  <head>
    <title>Yodiwo SDK &amp; API Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.34" />
<title>Plegma Things Creation and Handling :: Yodiwo SDK &amp; API Documentation</title>
<link rel="shortcut icon" href="/doc/images/favicon.png" type="image/x-icon" />
<link href="/doc/css/font-awesome.min.css" rel="stylesheet">
<link href="/doc/css/nucleus.css" rel="stylesheet">
<link href="/doc/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/doc/css/bootstrap.min.css">
<script src="/doc/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/docs.yodiwo.com\/doc\/";
</script>

<style>
div.code-tabs {
  position: relative;
  margin-top: -1px;
  z-index: 10;
  margin-bottom: -20px;
}

div.tab {
  font-size: 13px;
  display: inline-block;
  font-weight: 300;
}

.tab.on a {
  color: #009999;
}

.tab.off a {
  color: grey;
}
</style>
<script>
    function showCode(codeContainer, language) {
        var container = document.getElementById(codeContainer);
        var codes = container.getElementsByTagName('pre');
        for (var i = 0; i < codes.length; i++) {
            codes[i].style.display = 'none';
            if (codes[i].id == language) {
                codes[i].style.display = '';
            }
        }

        var tabs = container.getElementsByClassName('tab');
        for (var i = 0; i < tabs.length; i++) {
            tabs[i].className = "tab off";
            if (tabs[i].getAttribute("data-lang") == language) {
                tabs[i].className = 'tab on';
            }
        }
    }
</script>


<style>
.main {
min-height: calc(100vh - 40px);
}
</style>


<style>

.my-float{
        position:fixed;
        width:50px;
        height:45px;
        bottom:20px;
        right:40px;
        background-color: #012a3c;
        color:#FFF;
        border-radius: 60px;
        text-align: center;
        box-shadow: 2px 2px 3px #999;
        font-weight: bold;
        opacity: 0.45;
        font-size: 30px;
        margin-top:30px;
}


.my-float:hover {
        background-color: #012a3c;
        opacity: 0.8;
        color: white;
}

</style>


<style>
h4 {
padding-top: 71px;
}
</style>

    
  </head>
  <body data-url="/doc/integrators/connection-via-plegma-api/plegma-things-creation-and-handling/">
    
      <header>
  <div class="logo">
    
	
  
    <p><a id="logo" href="/">
<img src="/assets/images/logo.png" alt="Yodiwo">
</a></p>

  

  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
    <nav class="shortcuts">
            <li class="" role="">
                <a href="https://www.yodiwo.com" target="_blank" rel="noopener">
                  <i class='fa fa-globe'></i> <label>Yodiwo</label>
                </a>
            </li>
            <li class="" role="">
                <a href="https://tcyan.yodiwo.com" target="_blank" rel="noopener">
                  <i class='fa fa-cloud'></i> <label>Cyan</label>
                </a>
            </li>
            <li class="" role="">
                <a href="https://github.com/yodiwo" target="_blank" rel="noopener">
                  <i class='fa fa-github'></i> <label>Github repo</label>
                </a>
            </li>
            <li class="" role="">
                <a href="https://discuss.yodiwo.com" target="_blank" rel="noopener">
                  <i class='fa fa-comments'></i> <label>Community</label>
                </a>
            </li>
    </nav>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/doc/" class="dd-item">
          <a href="/doc/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/doc/platform/" class="dd-item haschildren
        ">
      <div>
      <a href="/doc/platform/">Platform</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/doc/platform/interconnection-concepts-and-topology/" class="dd-item">
        <div>
          <a href="/doc/platform/interconnection-concepts-and-topology/">
            Interconnection Concepts and Topology
          </a>
        </div></li>
      <li data-nav-id="/doc/platform/apis/" class="dd-item">
        <div>
          <a href="/doc/platform/apis/">
            APIs
          </a>
        </div></li>
      <li data-nav-id="/doc/platform/yodiwo-fog-gateway/" class="dd-item">
        <div>
          <a href="/doc/platform/yodiwo-fog-gateway/">
            Yodiwo Fog Gateway
          </a>
        </div></li>
        </ul>
    </li>
    <li data-nav-id="/doc/wisper/" class="dd-item haschildren
        ">
      <div>
      <a href="/doc/wisper/">Wisper</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/doc/wisper/yodiwo-wisper/" class="dd-item">
        <div>
          <a href="/doc/wisper/yodiwo-wisper/">
            Yodiwo Wisper
          </a>
        </div></li>
    <li data-nav-id="/doc/wisper/wisper-families/" class="dd-item haschildren
        ">
      <div>
      <a href="/doc/wisper/wisper-families/">Wisper Families</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/doc/wisper/wisper-families/wisper-pro/" class="dd-item">
        <div>
          <a href="/doc/wisper/wisper-families/wisper-pro/">
            Wisper Pro
          </a>
        </div></li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/doc/apis/" class="dd-item haschildren
        ">
      <div>
      <a href="/doc/apis/">Yodiwo APIs</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/doc/apis/plegma/" class="dd-item haschildren
        ">
      <div>
      <a href="/doc/apis/plegma/">Plegma</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/doc/apis/plegma/getting-started/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/getting-started/">
            Getting Started
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/pairing-overview/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/pairing-overview/">
            Pairing Overview
          </a>
        </div></li>
    <li data-nav-id="/doc/apis/plegma/messages/" class="dd-item haschildren
        ">
      <div>
      <a href="/doc/apis/plegma/messages/">API Messages</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/doc/apis/plegma/messages/api-overview/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/messages/api-overview/">
            API Overview
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/messages/base-api-message-class/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/messages/base-api-message-class/">
            Base API message class
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/messages/things-ports/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/messages/things-ports/">
            Things &amp; Ports
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/messages/things-mgmt-ctrl/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/messages/things-mgmt-ctrl/">
            Things management &amp; control
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/messages/message-event-passing/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/messages/message-event-passing/">
            Message &amp; event passing
          </a>
        </div></li>
        </ul>
    </li>
    <li data-nav-id="/doc/apis/plegma/rest/" class="dd-item haschildren
        ">
      <div>
      <a href="/doc/apis/plegma/rest/">Rest API</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/doc/apis/plegma/rest/rest-api/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/rest/rest-api/">
            Get available routes
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/rest/rest-api-things-get/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/rest/rest-api-things-get/">
            Get Things
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/rest/rest-api-things-set/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/rest/rest-api-things-set/">
            Set Things
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/rest/rest-api-events/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/rest/rest-api-events/">
            Post events
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/rest/rest-api-port-states-request/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/rest/rest-api-port-states-request/">
            Sync with server&#39;s Port States
          </a>
        </div></li>
        </ul>
    </li>
    <li data-nav-id="/doc/apis/plegma/mqtt/" class="dd-item haschildren
        ">
      <div>
      <a href="/doc/apis/plegma/mqtt/">MQTT</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/doc/apis/plegma/mqtt/mqtt-overview/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/mqtt/mqtt-overview/">
            MQTT support
          </a>
        </div></li>
      <li data-nav-id="/doc/apis/plegma/mqtt/message-format/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/mqtt/message-format/">
            Message format
          </a>
        </div></li>
        </ul>
    </li>
      <li data-nav-id="/doc/apis/plegma/websockets-overview/" class="dd-item">
        <div>
          <a href="/doc/apis/plegma/websockets-overview/">
            Web Sockets Overview
          </a>
        </div></li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/doc/integrators/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/doc/integrators/">Integrators</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/doc/integrators/direct-connection/" class="dd-item haschildren
        ">
      <div>
      <a href="/doc/integrators/direct-connection/">Direct Connection to Alcyone</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/doc/integrators/direct-connection/using-restful-http-requests/" class="dd-item">
        <div>
          <a href="/doc/integrators/direct-connection/using-restful-http-requests/">
            Using RESTful HTTP requests
          </a>
        </div></li>
      <li data-nav-id="/doc/integrators/direct-connection/using-3rd-party-mqtt-brokers/" class="dd-item">
        <div>
          <a href="/doc/integrators/direct-connection/using-3rd-party-mqtt-brokers/">
            Using 3rd party MQTT brokers
          </a>
        </div></li>
        </ul>
    </li>
    <li data-nav-id="/doc/integrators/connection-via-plegma-api/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/doc/integrators/connection-via-plegma-api/">Via the Plegma API</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/doc/integrators/connection-via-plegma-api/plegma-nodes-credentials/" class="dd-item">
        <div>
          <a href="/doc/integrators/connection-via-plegma-api/plegma-nodes-credentials/">
            Plegma Nodes Credentials
          </a>
        </div></li>
      <li data-nav-id="/doc/integrators/connection-via-plegma-api/plegma-things-creation-and-handling/" class="dd-item active">
        <div>
          <a href="/doc/integrators/connection-via-plegma-api/plegma-things-creation-and-handling/">
            Plegma Things Creation and Handling
          </a>
        </div> 
<ul>

</ul>

 </li>
        </ul>
    </li>
        </ul>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/doc/platform/" >
   Platform</option>
    <option value="/doc/wisper/" >
   Wisper</option>
    <option value="/doc/apis/" >
   Yodiwo APIs</option>
    <option value="/doc/integrators/" >
   Integrators</option> 
    <option value="/doc/integrators/direct-connection/" >
  - 
   Direct Connection to Alcyone</option>
    <option value="/doc/integrators/connection-via-plegma-api/" >
  - 
   Via the Plegma API</option> 
      <option value="/doc/integrators/connection-via-plegma-api/plegma-nodes-credentials/" >-- Plegma Nodes Credentials</option>
      <option value="/doc/integrators/connection-via-plegma-api/plegma-things-creation-and-handling/"  selected>-- Plegma Things Creation and Handling</option>
  
  



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/doc/js/lunr.min.js"></script>
        <script type="text/javascript" src="/doc/js/auto-complete.js"></script>
        <link href="/doc/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/docs.yodiwo.com\/doc\/";
          
        </script>
        <script type="text/javascript" src="/doc/js/search.js"></script>
      </div>
    

    <h1>Plegma Things Creation and Handling</h1>
    
    
    
    <p>A node’s main purpose is to maintain and present a list of Things, each of which models and virtualizes a real digital function, either physical or logical.</p>

<p>Upon a successful connection the Node sends their list of Things (each with a globally unique <strong>Thing Key</strong>) to the cloud, while it can also retrieve the Cloud’s previously synced Thing lists along with their configurations. As a result of this process, Cyan’s Designer Toolbox automatically presents the Node in its green section, populated with
the latest version of the Node’s virtualized Things:</p>

<p><img src="/assets/images/NodeGreenSection.png" alt="Alt Green Section" /></p>

<p>Things consist of one or more <em>Ports</em>, each of which sends or receives the minimum amount of data that can be exchanged and perform an operation related to the Thing.</p>

<p>Zero-port Things are <strong>allowed</strong>. They are useful in that they offer configuration options. Changing their configuration from Cyan will <strong>trigger</strong> events on the Node they belong to. Configuration can be changed either from the Designer section (once dropped into the canvas) or from the Things Manager tables’ Action column</p>

<p><img src="/assets/images/ConfChange.png" alt="" /></p>

<p>Multiple-port Things can trigger or be triggered on each Port individually or in multiples.</p>

<p>In the latter case Plegma and Alcyone guarantee concurrent handling of all triggered Ports, i.e. there is no timing, delays or races between handling of each Port, and the Nodes/Cloud will operate on the updated Thing as whole</p>

<p>Nodes can present their Things at connection time, or update, create or delete them at any later time. Plegma provides a mechanism to sync Thing revision numbers between the Cloud and Nodes, so that Things are not exchanged while both sides are in sync.</p>

<p>Sensor-type Things will appear as blocks that <strong>provide</strong> input <strong>to</strong> graphs. I.e. a device that virtualizes and presents beacon functionality will appear as:</p>

<p><img src="/assets/images/SensorBlock.png" alt="Alt Sensor-type Block" /></p>

<p>When the Node sends an actual beacon to Alcyone, it will trigger its next connected block(s) as designed in graphs by the Developer of the IoT scenario.</p>

<p>The same Thing block may appear in many different graphs and be connected to many different devices. They all represent <strong>the same Thing</strong>. Alcyone will <strong>trigger all blocks with the same event</strong>. By definition and by design there are no race sand there is no timing between blocks.</p>

<p>One may need to synchronize handling between events that come from independent asynchronous sources. In this case a special sync block may be used:</p>

<p><img src="/assets/images/SyncBarrier.png" alt="Alt Sync Barrier" /></p>

<p>Actuator-type Things will appear as blocks that <strong>receive</strong>
input <strong>from</strong> graphs. I.e. a device that virtualizes and presents a torch functionality (e.g. a smartphone’s LED) will appear as:</p>

<p><img src="/assets/images/Torch.png" alt="Alt Torch" /></p>

<p>This block receives Boolean events (or any other type that can automatically be converted to Boolean). Upon reception of the event, all Node endpoints that are currently active and connected to Alcyone will receive the event and be expected to immediately act on it.</p>

<ul>
<li>If nodes are offline at that time, the value is cached and Plegma offers a mechanism (Port State Get/Set) for it to be synced upon connection.</li>
<li>Multiple lost events overwrite their previous one</li>
<li>If an actuator is placed on different graphs, driven by different asynchronous inputs, and multiple points write to it “at
the same time”, then its actuations <strong>do not have a guaranteed order</strong>. They will all be served, in random order, resulting in toggles, overwrites or similar outcomes.</li>
</ul>

<p>Things that simultaneously offer Sensor and Actuator Ports functionality will still be automatically represented as two unique blocks. Same goes for Things with a single Input-Output Port such as a light switch that can be driven but whose output can also be used as an input to the graph:<img src="/assets/images/ThingswithSingle_In-Output.png" alt="" /></p>

<p>This is intentional and by design. Even if a Thing X sensor value is directly triggered by a Thing X’s actuator (as in a polling fashion), it needs to be shown clearly that:</p>

<ul>
<li><p>the target Node endpoint(s) shall be found, and if currently online…</p></li>

<li><p>the trigger / actuation event will leave the platform</p></li>

<li><p>traverse through the Plegma Link towards the Node</p></li>

<li><p>the node must act on it and generate an event(Port Event Msg)</p></li>

<li><p>send it back to Alcyone for it to trigger the relevant graph(s) where this Thing’s Block representation is placed</p></li>
</ul>

<p>Code on the Node side controls all of these aspects of Things and much more:</p>

<ul>
<li><p>Type of each Port’s messages (boolean, strings, decimals, integers, etc)</p></li>

<li><p>Icon of Thing</p></li>

<li><p>Description (per-Port and of Thing in general) that will appear when Cyan user hovers over the Thing</p></li>

<li><p>Changeable configuration entries of Thing.</p>

<p>NOTE: changing configuration via the “Edit” field of the Thing dropped on canvas will update the Thing “everywhere”. In reality there is no “everywhere”, each Thing is unique and belongs to its node, all its Cyan representations (e.g. on different graphs) refer to the same single Thing.</p></li>

<li><p>Read-only information of Thing</p></li>
</ul>


    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/doc/integrators/connection-via-plegma-api/plegma-nodes-credentials/" title="Plegma Nodes Credentials"> <i class="fa fa-chevron-left"></i><label>Plegma Nodes Credentials</label></a>
    <a class="nav nav-next" href="/doc/integrators/connection-via-plegma-api/plegma-nodes-credentials/" title="Plegma Nodes Credentials" style="margin-right: 0px;"><label>Plegma Nodes Credentials</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

  
    <div class="date">
        <i class='fa fa-calendar'></i> Last update on 23/01/2018
    </div>
    

    <div class="github-link">
      <a href="https://github.com/yodiwo/doc/edit/master/content/integrators/connection-via-plegma-api/plegma_things_creation_and_handling.md" target="blank"><i class="fa fa-code-fork"></i>
        Improve this page</a>
    </div>
  </div>


	<div>


  
    <p><center> Contact us at : info@yodiwo.com </center></p>

  



	</div>
</footer>

<script src="/doc/js/clipboard.min.js"></script>

<link href="/doc/css/featherlight.min.css" rel="stylesheet">
<script src="/doc/js/featherlight.min.js"></script>



<script src="/doc/theme-flex/script.js"></script>

    

    
    

    
  </body>
</html>